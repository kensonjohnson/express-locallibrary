<h1><%= title %></h1>

<form class="border rounded p-3" action="" method="post">
  <div class="form-group mb-3">
    <label class="form-label" for="title">Title:</label>
    <input id="title" class="form-control" type="text" name="title"
    required="true" value="<%= locals.book ? book.title : "" %>" />
  </div>
  <div class="form-group mb-3">
    <label class="form-label" for="author">Author:</label>
    <select id="author" class="form-control" name="author" required="true">
      <option>Please select an Author</option>
      <% data.authors.forEach((author)=>{ if(book){ %> <option value="<%=
      author._id %>" <%= book.author._id.toString() === author._id.toString() ?
      " selected" : "" %>> <%= author.name %> <% } else { %>
      <option value="<%= author._id %>"><%= author.name %></option>
      <% } %> <% }) %>
    </select>
  </div>
  <div class="form-group mb-3">
    <label class="form-label" for="summary">Summary:</label>
    <input id="summary" class="form-control" type="text" name="summary"
    value="<%= locals.book ? book.summary : "" %>">
  </div>
  <div class="form-group mb-3">
    <label class="form-label" for="isbn">ISBN:</label>
    <input id="isbn" class="form-control" type="text" name="isbn" value="<%=
    locals.book ? book.isbn : "" %>">
  </div>
  <div class="form-group mb-3">
    <label>Genre:</label>
    <div>
      <% data.genres.forEach((genre)=>{ %>
      <div class="d-inline pe-2">
        <input type="checkbox" class="checkbox-input" id="<%= genre._id %>"
        value="<%= genre._id %>" <%= genre.checked ? 'checked=true' : "" %>
        name="genre">
        <label for="<%= genre._id %>"><%= genre.name %></label>
      </div>
      <% }) %>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
<% if(locals.errors){ %>
<ul class="list-group my-4">
  <% for( const error of errors){ %>
  <li class="list-group-item list-group-item-warning"><%= error.msg %></li>
  <% } %>
</ul>
<% } %>
